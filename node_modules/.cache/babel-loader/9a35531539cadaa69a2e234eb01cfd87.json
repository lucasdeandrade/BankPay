{"ast":null,"code":"/**\n * Bundle of @devexpress/dx-react-core\n * Generated: 2022-07-12\n * Version: 3.0.4\n * License: https://js.devexpress.com/Licensing\n */\nimport { createContext, createElement, Children, PureComponent, Component, forwardRef, isValidElement, cloneElement, createRef, useContext } from 'react';\nimport { shallowEqual, PluginHost as PluginHost$1, EventEmitter } from '@devexpress/dx-core';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { shape, instanceOf } from 'prop-types';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n/** @deprecated */\n\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n}\n/** @internal */\n\n\nvar PluginHostContext = createContext(null);\n/** @internal */\n\nvar PositionContext = createContext(function () {\n  return [];\n});\n/** @internal */\n\nvar TemplateHostContext = createContext(null);\n/** @internal */\n\nvar PluginIndexer = /*#__PURE__*/function (_super) {\n  __extends(PluginIndexer, _super);\n\n  function PluginIndexer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.indexes = {};\n\n    _this.memoize = function (index, positionContext) {\n      if (_this.indexes[index]) return _this.indexes[index];\n\n      var fn = function () {\n        var calculatedPosition = positionContext();\n        return __spread(calculatedPosition, [index]);\n      };\n\n      _this.indexes[index] = fn;\n      return fn;\n    };\n\n    return _this;\n  }\n\n  PluginIndexer.prototype.render = function () {\n    var _this = this;\n\n    var children = this.props.children;\n    return createElement(PositionContext.Consumer, null, function (positionContext) {\n      return Children.map(children, function (child, index) {\n        if (!child || !child.type) return child;\n\n        var childPosition = _this.memoize(index, positionContext);\n\n        return createElement(PositionContext.Provider, {\n          key: String(index),\n          value: childPosition\n        }, child);\n      });\n    });\n  };\n\n  return PluginIndexer;\n}(PureComponent);\n/** @internal */\n\n\nvar PLUGIN_HOST_CONTEXT = 'dxcore_pluginHost_context';\n/** @internal */\n\nvar POSITION_CONTEXT = 'dxcore_position_context';\n/** @internal */\n\nvar TEMPLATE_HOST_CONTEXT = 'dxcore_templateHost_context';\n/** @internal */\n\nvar RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\n/** @internal */\n\nvar RERENDER_TEMPLATE_SCOPE_EVENT = Symbol('rerenderTemplateScope');\n/** @internal */\n\nvar UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n/** @internal */\n\nvar withContext = function (Context, name) {\n  return function (Component) {\n    return function (props) {\n      return createElement(Context.Consumer, null, function (context) {\n        var _a;\n\n        return createElement(Component, __assign({}, props, (_a = {}, _a[name] = context, _a)));\n      });\n    };\n  };\n};\n/** @internal */\n\n\nvar withHostAndPosition = function (Component) {\n  return withContext(PluginHostContext, PLUGIN_HOST_CONTEXT)(withContext(PositionContext, POSITION_CONTEXT)(Component));\n};\n/** @internal */\n\n\nvar PluginBase = /*#__PURE__*/function (_super) {\n  __extends(PluginBase, _super);\n\n  function PluginBase() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PluginBase.prototype.componentDidMount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b],\n        _c = POSITION_CONTEXT,\n        position = _a[_c];\n    var _d = this.props,\n        name = _d.name,\n        dependencies = _d.dependencies;\n    this.plugin = {\n      position: position,\n      name: name,\n      dependencies: dependencies,\n      container: true\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.ensureDependencies();\n  };\n\n  PluginBase.prototype.componentDidUpdate = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.ensureDependencies();\n  };\n\n  PluginBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterPlugin(this.plugin);\n  };\n\n  PluginBase.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(PluginIndexer, null, children);\n  };\n\n  return PluginBase;\n}(PureComponent);\n\nvar Plugin = withHostAndPosition(PluginBase);\n\nvar getRenderingData = function (props) {\n  var name = props.name,\n      params = props.params;\n\n  if (name) {\n    var _a = props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    return {\n      params: params,\n      templates: pluginHost.collect(name + \"Template\").filter(function (template) {\n        return template.predicate(params);\n      }).reverse()\n    };\n  }\n\n  var _c = props,\n      _d = TEMPLATE_HOST_CONTEXT,\n      templateHost = _c[_d];\n  return {\n    params: params || templateHost.params(),\n    templates: templateHost.templates()\n  };\n};\n\nvar TemplatePlaceholderBase = /*#__PURE__*/function (_super) {\n  __extends(TemplatePlaceholderBase, _super);\n\n  function TemplatePlaceholderBase() {\n    var _a;\n\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.subscription = (_a = {}, _a[RERENDER_TEMPLATE_EVENT] = function (id) {\n      if (_this.template && _this.template.id === id) {\n        _this.forceUpdate();\n      }\n    }, _a[RERENDER_TEMPLATE_SCOPE_EVENT] = function (name) {\n      var propsName = _this.props.name;\n\n      if (propsName === name) {\n        _this.forceUpdate();\n      }\n    }, _a);\n    _this.template = null;\n    _this.params = {};\n    return _this;\n  }\n\n  TemplatePlaceholderBase.prototype.componentDidMount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.registerSubscription(this.subscription);\n  };\n\n  TemplatePlaceholderBase.prototype.shouldComponentUpdate = function (nextProps) {\n    var _a = getRenderingData(nextProps),\n        params = _a.params,\n        templates = _a.templates;\n\n    var _b = __read(templates, 1),\n        template = _b[0];\n\n    var children = this.props.children;\n    return children !== nextProps.children || templates.length !== getRenderingData(this.props).templates.length || this.template !== template || !shallowEqual(this.params, params);\n  };\n\n  TemplatePlaceholderBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterSubscription(this.subscription);\n  };\n\n  TemplatePlaceholderBase.prototype.render = function () {\n    var _a;\n\n    var _this = this;\n\n    var _b = getRenderingData(this.props),\n        params = _b.params,\n        templates = _b.templates;\n\n    this.params = params;\n    _a = __read(templates, 1), this.template = _a[0];\n    var restTemplates = templates.slice(1);\n    var content = null;\n\n    if (this.template) {\n      var templateContent = this.template.children;\n      content = templateContent() || null;\n\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    var templatePlaceholder = this.props.children;\n    return createElement(TemplateHostContext.Provider, {\n      value: {\n        templates: function () {\n          return restTemplates;\n        },\n        params: function () {\n          return _this.params;\n        }\n      }\n    }, templatePlaceholder ? templatePlaceholder(content) : content);\n  };\n\n  return TemplatePlaceholderBase;\n}(Component);\n/** A React component to which a related Template is rendered. */\n\n\nvar TemplatePlaceholder = withContext(PluginHostContext, PLUGIN_HOST_CONTEXT)(withContext(TemplateHostContext, TEMPLATE_HOST_CONTEXT)(TemplatePlaceholderBase));\n\nvar PlaceholderWithRef = function (_a) {\n  var params = _a.params,\n      forwardedRef = _a.forwardedRef;\n  return createElement(TemplatePlaceholder, {\n    params: __assign(__assign({}, params), {\n      forwardedRef: forwardedRef\n    })\n  });\n};\n/** @internal */\n\n\nvar PluginHostBase = /*#__PURE__*/function (_super) {\n  __extends(PluginHostBase, _super);\n\n  function PluginHostBase(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.host = new PluginHost$1();\n    return _this;\n  }\n\n  PluginHostBase.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(PluginHostContext.Provider, {\n      value: this.host\n    }, createElement(PluginIndexer, null, children), createElement(TemplatePlaceholder, {\n      name: \"root\"\n    }));\n  };\n\n  return PluginHostBase;\n}(PureComponent);\n\nvar PluginHost = PluginHostBase;\n/** @internal */\n\nvar getAvailableGetters = function (pluginHost, getGetterValue) {\n  if (getGetterValue === void 0) {\n    getGetterValue = function (getterName) {\n      return pluginHost.get(getterName + \"Getter\");\n    };\n  }\n\n  var trackedDependencies = {};\n  var getters;\n\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get: function (target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        var result = getGetterValue(prop);\n        trackedDependencies[prop] = result;\n        return result;\n      },\n      getOwnPropertyDescriptor: function (target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get(target, prop, undefined)\n        };\n      },\n      ownKeys: function () {\n        return pluginHost.knownKeys('Getter');\n      }\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter').reduce(function (acc, getterName) {\n      Object.defineProperty(acc, getterName, {\n        get: function () {\n          var result = getGetterValue(getterName);\n          trackedDependencies[getterName] = result;\n          return result;\n        }\n      });\n      return acc;\n    }, {});\n  }\n\n  return {\n    getters: getters,\n    trackedDependencies: trackedDependencies\n  };\n};\n/** @internal */\n\n\nvar isTrackedDependenciesChanged = function (pluginHost, prevTrackedDependencies, getGetterValue) {\n  if (getGetterValue === void 0) {\n    getGetterValue = function (getterName) {\n      return pluginHost.get(getterName + \"Getter\");\n    };\n  }\n\n  var trackedDependencies = Object.keys(prevTrackedDependencies) // tslint:disable-next-line: prefer-object-spread\n  .reduce(function (acc, getterName) {\n    var _a;\n\n    return Object.assign(acc, (_a = {}, _a[getterName] = getGetterValue(getterName), _a));\n  }, {});\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n/** @internal */\n\n\nvar getAvailableActions = function (pluginHost, getAction) {\n  if (getAction === void 0) {\n    getAction = function (actionName) {\n      return pluginHost.collect(actionName + \"Action\").slice().reverse()[0];\n    };\n  }\n\n  var actions;\n\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get: function (target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor: function (target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get(target, prop, undefined)\n        };\n      },\n      ownKeys: function () {\n        return pluginHost.knownKeys('Action');\n      }\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action').reduce(function (acc, actionName) {\n      Object.defineProperty(acc, actionName, {\n        get: function () {\n          return getAction(actionName);\n        }\n      });\n      return acc;\n    }, {});\n  }\n\n  return actions;\n};\n\nvar ActionBase = /*#__PURE__*/function (_super) {\n  __extends(ActionBase, _super);\n\n  function ActionBase(props) {\n    var _a;\n\n    var _this = _super.call(this, props) || this;\n\n    var _b = props,\n        _c = PLUGIN_HOST_CONTEXT,\n        pluginHost = _b[_c],\n        _d = POSITION_CONTEXT,\n        positionContext = _b[_d];\n    var name = props.name;\n    _this.plugin = (_a = {\n      position: function () {\n        return positionContext();\n      }\n    }, _a[name + \"Action\"] = function (params) {\n      var action = _this.props.action;\n      var getters = getAvailableGetters(pluginHost, function (getterName) {\n        return pluginHost.get(getterName + \"Getter\", _this.plugin);\n      }).getters;\n      var nextParams = params;\n      var actions = getAvailableActions(pluginHost, function (actionName) {\n        return actionName === name ? function (newParams) {\n          nextParams = newParams;\n        } : pluginHost.collect(actionName + \"Action\", _this.plugin).slice().reverse()[0];\n      });\n      action(params, getters, actions);\n      var nextAction = pluginHost.collect(name + \"Action\", _this.plugin).slice().reverse()[0];\n\n      if (nextAction) {\n        nextAction(nextParams);\n      }\n    }, _a);\n    pluginHost.registerPlugin(_this.plugin);\n    return _this;\n  }\n\n  ActionBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterPlugin(this.plugin);\n  };\n\n  ActionBase.prototype.render = function () {\n    return null;\n  };\n\n  return ActionBase;\n}(PureComponent);\n\nvar Action = withHostAndPosition(ActionBase);\n\nvar GetterBase = /*#__PURE__*/function (_super) {\n  __extends(GetterBase, _super);\n\n  function GetterBase(props) {\n    var _a;\n\n    var _this = _super.call(this, props) || this;\n\n    var _b = props,\n        _c = PLUGIN_HOST_CONTEXT,\n        pluginHost = _b[_c],\n        _d = POSITION_CONTEXT,\n        positionContext = _b[_d];\n    var name = props.name;\n    var lastComputed;\n    var lastTrackedDependencies = {};\n    var lastResult;\n    _this.plugin = (_a = {\n      position: function () {\n        return positionContext();\n      }\n    }, _a[name + \"Getter\"] = function (original) {\n      var _a = _this.props,\n          value = _a.value,\n          computed = _a.computed;\n      if (computed === undefined) return value;\n\n      var getGetterValue = function (getterName) {\n        return getterName === name ? original : pluginHost.get(getterName + \"Getter\", _this.plugin);\n      };\n\n      if (computed === lastComputed && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n        return lastResult;\n      }\n\n      var _b = getAvailableGetters(pluginHost, getGetterValue),\n          getters = _b.getters,\n          trackedDependencies = _b.trackedDependencies;\n\n      var actions = getAvailableActions(pluginHost);\n      lastComputed = computed;\n      lastTrackedDependencies = trackedDependencies;\n      lastResult = computed(getters, actions);\n      return lastResult;\n    }, _a);\n    pluginHost.registerPlugin(_this.plugin);\n    return _this;\n  }\n\n  GetterBase.prototype.componentDidUpdate = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n  };\n\n  GetterBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterPlugin(this.plugin);\n  };\n\n  GetterBase.prototype.render = function () {\n    return null;\n  };\n\n  return GetterBase;\n}(PureComponent);\n\nvar Getter = withHostAndPosition(GetterBase);\nvar globalTemplateId = 0;\n/** @internal */\n\nvar TemplateBase = /*#__PURE__*/function (_super) {\n  __extends(TemplateBase, _super);\n\n  function TemplateBase(props) {\n    var _a;\n\n    var _this = _super.call(this, props) || this;\n\n    _this.children = function () {\n      return void 0;\n    };\n\n    globalTemplateId += 1;\n    _this.id = globalTemplateId;\n    var _b = props,\n        _c = PLUGIN_HOST_CONTEXT,\n        pluginHost = _b[_c],\n        _d = POSITION_CONTEXT,\n        positionContext = _b[_d];\n    var name = props.name,\n        predicate = props.predicate;\n    _this.plugin = (_a = {\n      position: function () {\n        return positionContext();\n      }\n    }, _a[name + \"Template\"] = {\n      id: _this.id,\n      predicate: function (params) {\n        return predicate ? predicate(params) : true;\n      },\n      children: function () {\n        var children = _this.props.children;\n        return children;\n      }\n    }, _a);\n    pluginHost.registerPlugin(_this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n    return _this;\n  }\n\n  TemplateBase.prototype.componentDidUpdate = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  };\n\n  TemplateBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    var name = this.props.name;\n    pluginHost.unregisterPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  };\n\n  TemplateBase.prototype.render = function () {\n    return null;\n  };\n\n  return TemplateBase;\n}(PureComponent);\n/*** A React component that defines a markup that is rendered\r\n * as the corresponding TemplatePlaceholder.\r\n */\n\n\nvar Template = withHostAndPosition(TemplateBase);\n/** @internal */\n\nvar TemplateConnectorBase = /*#__PURE__*/function (_super) {\n  __extends(TemplateConnectorBase, _super);\n\n  function TemplateConnectorBase(props, context) {\n    var _a;\n\n    var _this = _super.call(this, props, context) || this;\n\n    _this.trackedDependencies = {};\n    _this.subscription = (_a = {}, _a[UPDATE_CONNECTION_EVENT] = function () {\n      return _this.updateConnection();\n    }, _a);\n    return _this;\n  }\n\n  TemplateConnectorBase.prototype.componentDidMount = function () {\n    var pluginHost = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  };\n\n  TemplateConnectorBase.prototype.componentWillUnmount = function () {\n    var pluginHost = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  };\n\n  TemplateConnectorBase.prototype.updateConnection = function () {\n    var pluginHost = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.forceUpdate();\n    }\n  };\n\n  TemplateConnectorBase.prototype.render = function () {\n    var pluginHost = this.context;\n    var children = this.props.children;\n\n    var _a = getAvailableGetters(pluginHost),\n        getters = _a.getters,\n        trackedDependencies = _a.trackedDependencies;\n\n    this.trackedDependencies = trackedDependencies;\n    var actions = getAvailableActions(pluginHost);\n    return children(getters, actions);\n  };\n\n  return TemplateConnectorBase;\n}(Component);\n\nTemplateConnectorBase.contextType = PluginHostContext;\n/** A React component that provides access to Getters and Actions within a Template. */\n\nvar TemplateConnector = TemplateConnectorBase;\nvar TIMEOUT = 180;\n/** @internal */\n\nvar TouchStrategy = /*#__PURE__*/function () {\n  function TouchStrategy(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n\n  TouchStrategy.prototype.isDragging = function () {\n    return this.dragging;\n  };\n\n  TouchStrategy.prototype.isWaiting = function () {\n    return !!this.touchStartTimeout;\n  };\n\n  TouchStrategy.prototype.cancelWaiting = function () {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = undefined;\n  };\n\n  TouchStrategy.prototype.start = function (e) {\n    var _this = this;\n\n    var _a = e.touches[0],\n        x = _a.clientX,\n        y = _a.clientY;\n    this.touchStartTimeout = setTimeout(function () {\n      _this.delegate.onStart({\n        x: x,\n        y: y\n      });\n\n      _this.dragging = true;\n    }, TIMEOUT);\n  };\n\n  TouchStrategy.prototype.move = function (e) {\n    this.cancelWaiting();\n\n    if (this.dragging) {\n      var _a = e.touches[0],\n          clientX = _a.clientX,\n          clientY = _a.clientY;\n      e.preventDefault();\n      this.delegate.onMove({\n        x: clientX,\n        y: clientY\n      });\n    }\n  };\n\n  TouchStrategy.prototype.end = function (e) {\n    this.cancelWaiting();\n\n    if (this.dragging) {\n      var _a = e.changedTouches[0],\n          clientX = _a.clientX,\n          clientY = _a.clientY;\n      this.delegate.onEnd({\n        x: clientX,\n        y: clientY\n      });\n    }\n\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  };\n\n  return TouchStrategy;\n}();\n/* globals document:true */\n\n\nvar gestureCover;\n/** @internal */\n\nvar toggleGestureCover = function (toggle, cursor) {\n  var style = {\n    pointerEvents: toggle ? 'all' : 'none'\n  };\n\n  if (toggle && cursor) {\n    style = __assign(__assign({}, style), {\n      cursor: cursor\n    });\n  }\n\n  if (!gestureCover) {\n    style = __assign(__assign({}, style), {\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647\n    });\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n\n  Object.keys(style).forEach(function (key) {\n    gestureCover.style[key] = style[key];\n  });\n};\n/* globals document:true window:true */\n\n/** @internal */\n\n\nvar clear = function () {\n  var selection = window.getSelection && window.getSelection();\n\n  if (selection) {\n    if (selection.empty) {\n      selection.empty();\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges();\n    }\n  }\n};\n/* globals window:true document:true */\n\n\nvar BOUNDARY = 10;\n\nvar clamp = function (value, min, max) {\n  return Math.max(Math.min(value, max), min);\n};\n\nvar isBoundExceeded = function (_a, _b) {\n  var initialX = _a.x,\n      initialY = _a.y;\n  var x = _b.x,\n      y = _b.y;\n  return clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x || clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n};\n/** @internal */\n\n\nvar MouseStrategy = /*#__PURE__*/function () {\n  function MouseStrategy(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n\n  MouseStrategy.prototype.isDragging = function () {\n    return this.dragging;\n  };\n\n  MouseStrategy.prototype.start = function (e) {\n    var x = e.clientX,\n        y = e.clientY;\n    this.e = e;\n    this.mouseInitialOffset = {\n      x: x,\n      y: y\n    };\n  };\n\n  MouseStrategy.prototype.move = function (e) {\n    var x = e.clientX,\n        y = e.clientY;\n    var dragStarted = false;\n\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, {\n        x: x,\n        y: y\n      })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        clear();\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({\n        x: x,\n        y: y\n      });\n    }\n\n    if (dragStarted) {\n      var element = document.elementFromPoint(x, y);\n      var cursor = element ? window.getComputedStyle(element).cursor : null;\n      toggleGestureCover(true, cursor);\n    }\n  };\n\n  MouseStrategy.prototype.end = function (e) {\n    if (this.dragging) {\n      var x = e.clientX,\n          y = e.clientY;\n      toggleGestureCover(false);\n      this.delegate.onEnd({\n        x: x,\n        y: y\n      });\n    }\n\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  };\n\n  return MouseStrategy;\n}();\n/* globals window:true */\n\n\nvar eventEmitter;\n/** @internal */\n\nvar getSharedEventEmitter = function () {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel'].forEach(function (name) {\n      return window.addEventListener(name, function (e) {\n        return eventEmitter.emit([name, e]);\n      }, {\n        passive: false\n      });\n    });\n  }\n\n  return eventEmitter;\n};\n/** @internal */\n\n\nvar RefHolder = forwardRef(function (_a, ref) {\n  var _b;\n\n  var children = _a.children;\n  return isValidElement(children) ? typeof children.type === 'string' ? cloneElement(children, {\n    ref: ref\n  }) : cloneElement(children, {\n    forwardedRef: ((_b = children.props) === null || _b === void 0 ? void 0 : _b.forwardedRef) ? function (node) {\n      children.props.forwardedRef(node);\n\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    } : ref\n  }) : createElement('div', {\n    ref: ref,\n    style: {\n      display: 'contents'\n    }\n  }, children);\n});\nvar draggingHandled = Symbol('draggingHandled');\n/** @internal */\n\nvar Draggable = /*#__PURE__*/function (_super) {\n  __extends(Draggable, _super);\n\n  function Draggable(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.eventParams = null;\n    _this.detachNodeEvents = null;\n    var delegate = {\n      onStart: function (_a) {\n        var x = _a.x,\n            y = _a.y;\n        var onStart = _this.props.onStart;\n        if (!onStart) return;\n        unstable_batchedUpdates(function () {\n          onStart({\n            x: x,\n            y: y\n          });\n        });\n      },\n      onMove: function (_a) {\n        var x = _a.x,\n            y = _a.y;\n        var onUpdate = _this.props.onUpdate;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(function () {\n          onUpdate({\n            x: x,\n            y: y\n          });\n        });\n      },\n      onEnd: function (_a) {\n        var x = _a.x,\n            y = _a.y;\n        var onEnd = _this.props.onEnd;\n        if (!onEnd) return;\n        unstable_batchedUpdates(function () {\n          onEnd({\n            x: x,\n            y: y\n          });\n        });\n      }\n    };\n    _this.mouseStrategy = new MouseStrategy(delegate);\n    _this.touchStrategy = new TouchStrategy(delegate);\n    _this.elementRef = createRef();\n    _this.mouseDownListener = _this.mouseDownListener.bind(_this);\n    _this.touchStartListener = _this.touchStartListener.bind(_this);\n    _this.globalListener = _this.globalListener.bind(_this);\n    return _this;\n  }\n\n  Draggable.prototype.componentDidMount = function () {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  };\n\n  Draggable.prototype.componentDidUpdate = function () {\n    this.setupNodeSubscription();\n  };\n\n  Draggable.prototype.componentWillUnmount = function () {\n    var _a;\n\n    if (this.eventParams) {\n      var _b = this.eventParams,\n          isMouseEvent = _b.isMouseEvent,\n          e = _b.e;\n\n      if (isMouseEvent) {\n        this.mouseStrategy.end(e);\n      } else {\n        this.touchStrategy.end(e);\n      }\n\n      this.eventParams = null;\n    }\n\n    (_a = this.detachNodeEvents) === null || _a === void 0 ? void 0 : _a.call(this);\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  };\n\n  Draggable.prototype.setupNodeSubscription = function () {\n    var _this = this;\n\n    var _a;\n\n    var node = this.elementRef.current;\n    if (!node) return;\n    (_a = this.detachNodeEvents) === null || _a === void 0 ? void 0 : _a.call(this);\n    node.addEventListener('mousedown', this.mouseDownListener);\n    node.addEventListener('touchstart', this.touchStartListener, {\n      passive: true\n    });\n\n    this.detachNodeEvents = function () {\n      node.removeEventListener('mousedown', _this.mouseDownListener);\n      node.removeEventListener('touchstart', _this.touchStartListener);\n    };\n  };\n\n  Draggable.prototype.mouseDownListener = function (e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    e.preventDefault();\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  };\n\n  Draggable.prototype.touchStartListener = function (e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  };\n\n  Draggable.prototype.saveEvent = function (e, isMouseEvent) {\n    this.eventParams = {\n      e: e,\n      isMouseEvent: isMouseEvent\n    };\n  };\n\n  Draggable.prototype.globalListener = function (_a) {\n    var _b = __read(_a, 2),\n        name = _b[0],\n        e = _b[1];\n\n    switch (name) {\n      case 'mousemove':\n        this.saveEvent(e, true);\n        this.mouseStrategy.move(e);\n        break;\n\n      case 'mouseup':\n        this.eventParams = null;\n        this.mouseStrategy.end(e);\n        break;\n\n      case 'touchmove':\n        {\n          this.saveEvent(e, false);\n          this.touchStrategy.move(e);\n          break;\n        }\n\n      case 'touchend':\n      case 'touchcancel':\n        {\n          this.eventParams = null;\n          this.touchStrategy.end(e);\n          break;\n        }\n    }\n\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  };\n\n  Draggable.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        dragItem = _a.dragItem;\n    return createElement(RefHolder, {\n      ref: function (node) {\n        _this.elementRef.current = node;\n\n        if (typeof dragItem === 'function') {\n          dragItem(node);\n        } else if (dragItem) {\n          dragItem.current = node;\n        }\n      }\n    }, children);\n  };\n\n  return Draggable;\n}(PureComponent);\n/** @internal */\n\n\nvar DragDropContext = createContext(null);\n/** @internal */\n\nvar DragDropProviderCore = /*#__PURE__*/function () {\n  function DragDropProviderCore() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n\n  DragDropProviderCore.prototype.start = function (payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({\n      clientOffset: clientOffset,\n      payload: this.payload\n    });\n  };\n\n  DragDropProviderCore.prototype.update = function (clientOffset) {\n    this.dragEmitter.emit({\n      clientOffset: clientOffset,\n      payload: this.payload\n    });\n  };\n\n  DragDropProviderCore.prototype.end = function (clientOffset) {\n    this.dragEmitter.emit({\n      clientOffset: clientOffset,\n      payload: this.payload,\n      end: true\n    });\n    this.payload = null;\n  };\n\n  return DragDropProviderCore;\n}();\n\nvar defaultProps = {\n  onChange: function (_a) {\n    var payload = _a.payload,\n        clientOffset = _a.clientOffset;\n  }\n};\n/** @internal */\n// tslint:disable-next-line: max-classes-per-file\n\nvar DragDropProvider = /*#__PURE__*/function (_super) {\n  __extends(DragDropProvider, _super);\n\n  function DragDropProvider(props) {\n    var _this = _super.call(this, props) || this;\n\n    var onChange = _this.props.onChange;\n    _this.dragDropProvider = new DragDropProviderCore();\n\n    _this.dragDropProvider.dragEmitter.subscribe(function (_a) {\n      var payload = _a.payload,\n          clientOffset = _a.clientOffset,\n          end = _a.end;\n      onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset\n      });\n    });\n\n    return _this;\n  }\n\n  DragDropProvider.prototype.shouldComponentUpdate = function (nextProps) {\n    var children = this.props.children;\n    return nextProps.children !== children;\n  };\n\n  DragDropProvider.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(DragDropContext.Provider, {\n      value: this.dragDropProvider\n    }, children);\n  };\n\n  DragDropProvider.defaultProps = defaultProps;\n  return DragDropProvider;\n}(Component);\n\nvar defaultProps$1 = {\n  onStart: function (_a) {\n    var clientOffset = _a.clientOffset;\n  },\n  onUpdate: function (_a) {\n    var clientOffset = _a.clientOffset;\n  },\n  onEnd: function (_a) {\n    var clientOffset = _a.clientOffset;\n  }\n};\n/** @internal */\n\nvar DragSource = forwardRef(function (_a, ref) {\n  var onStart = _a.onStart,\n      onUpdate = _a.onUpdate,\n      onEnd = _a.onEnd,\n      payload = _a.payload,\n      children = _a.children;\n  var context = useContext(DragDropContext);\n  var dragDropProvider = context;\n  return createElement(Draggable, {\n    onStart: function (_a) {\n      var x = _a.x,\n          y = _a.y;\n      dragDropProvider === null || dragDropProvider === void 0 ? void 0 : dragDropProvider.start(payload, {\n        x: x,\n        y: y\n      });\n      onStart === null || onStart === void 0 ? void 0 : onStart({\n        clientOffset: {\n          x: x,\n          y: y\n        }\n      });\n    },\n    onUpdate: function (_a) {\n      var x = _a.x,\n          y = _a.y;\n      dragDropProvider === null || dragDropProvider === void 0 ? void 0 : dragDropProvider.update({\n        x: x,\n        y: y\n      });\n      onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate({\n        clientOffset: {\n          x: x,\n          y: y\n        }\n      });\n    },\n    onEnd: function (_a) {\n      var x = _a.x,\n          y = _a.y;\n      dragDropProvider === null || dragDropProvider === void 0 ? void 0 : dragDropProvider.end({\n        x: x,\n        y: y\n      });\n      onEnd === null || onEnd === void 0 ? void 0 : onEnd({\n        clientOffset: {\n          x: x,\n          y: y\n        }\n      });\n    },\n    dragItem: ref\n  }, children);\n});\nDragSource.defaultProps = defaultProps$1;\n\nvar clamp$1 = function (value, min, max) {\n  return Math.max(Math.min(value, max), min);\n};\n\nvar defaultProps$2 = {\n  onEnter: function (args) {},\n  onOver: function (args) {},\n  onLeave: function (args) {},\n  onDrop: function (args) {}\n};\n/** @internal */\n\nvar DropTarget = /*#__PURE__*/function (_super) {\n  __extends(DropTarget, _super);\n\n  function DropTarget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.isOver = false;\n    _this.handleDrag = _this.handleDrag.bind(_this);\n    _this.elementRef = createRef();\n    return _this;\n  }\n\n  DropTarget.prototype.componentDidMount = function () {\n    var dragEmitter = this.context.dragEmitter;\n    dragEmitter.subscribe(this.handleDrag);\n  };\n\n  DropTarget.prototype.shouldComponentUpdate = function (nextProps) {\n    var children = this.props.children;\n    return nextProps.children !== children;\n  };\n\n  DropTarget.prototype.componentWillUnmount = function () {\n    var dragEmitter = this.context.dragEmitter;\n    dragEmitter.unsubscribe(this.handleDrag);\n  };\n\n  DropTarget.prototype.handleDrag = function (_a) {\n    var payload = _a.payload,\n        clientOffset = _a.clientOffset,\n        end = _a.end;\n\n    var _b = this.elementRef.current.getBoundingClientRect(),\n        left = _b.left,\n        top = _b.top,\n        right = _b.right,\n        bottom = _b.bottom;\n\n    var _c = this.props,\n        onDrop = _c.onDrop,\n        onEnter = _c.onEnter,\n        onLeave = _c.onLeave,\n        onOver = _c.onOver;\n    var isOver = clientOffset && clamp$1(clientOffset.x, left, right) === clientOffset.x && clamp$1(clientOffset.y, top, bottom) === clientOffset.y;\n    if (!this.isOver && isOver) onEnter({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    if (this.isOver && isOver) onOver({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    if (this.isOver && !isOver) onLeave({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    if (isOver && end) onDrop({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    this.isOver = isOver && !end;\n  };\n\n  DropTarget.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(RefHolder, {\n      ref: this.elementRef\n    }, Children.only(children));\n  };\n\n  DropTarget.defaultProps = defaultProps$2;\n  return DropTarget;\n}(Component);\n\nDropTarget.contextType = DragDropContext;\n/* globals document:true */\n\nvar SCROLL_OFFSET = 2;\nvar styles = {\n  root: {\n    position: 'relative'\n  },\n  triggersRoot: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0\n  },\n  expandTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto'\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n    minHeight: '1px',\n    minWidth: '1px'\n  },\n  contractNotifier: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n    minHeight: '2px',\n    minWidth: '2px'\n  }\n};\n/** @internal */\n\nvar Sizer = /*#__PURE__*/function (_super) {\n  __extends(Sizer, _super);\n\n  function Sizer(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.getSize = function () {\n      return {\n        height: _this.rootNode.clientHeight,\n        width: _this.rootNode.clientWidth\n      };\n    };\n\n    _this.setupListeners = _this.setupListeners.bind(_this);\n    _this.updateScrolling = _this.updateScrolling.bind(_this);\n    _this.rootRef = createRef();\n    return _this;\n  }\n\n  Sizer.prototype.componentDidMount = function () {\n    this.rootNode = this.rootRef.current;\n    this.createListeners();\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.setupListeners();\n  };\n\n  Sizer.prototype.shouldComponentUpdate = function (prevProps) {\n    if (prevProps.scrollTop !== this.props.scrollTop || prevProps.scrollLeft !== this.props.scrollLeft || prevProps.style && this.props.style && !shallowEqual(prevProps.style, this.props.style) || prevProps.style && !this.props.style || prevProps.children !== this.props.children) {\n      return true;\n    }\n\n    return false;\n  };\n\n  Sizer.prototype.componentDidUpdate = function () {\n    // We can scroll the VirtualTable manually only by changing\n    // containter's (rootNode) scrollTop property.\n    // Viewport changes its own properties automatically.\n    var _a = this.props,\n        scrollTop = _a.scrollTop,\n        scrollLeft = _a.scrollLeft;\n\n    if (scrollTop !== undefined && scrollTop > -1) {\n      this.rootNode.scrollTop = scrollTop;\n    }\n\n    if (scrollLeft !== undefined && scrollLeft > -1) {\n      this.rootNode.scrollLeft = scrollLeft;\n    }\n\n    this.updateScrolling(this.getSize());\n  }; // There is no need to remove listeners as divs are removed from DOM when component is unmount.\n  // But there is a little chance that component unmounting and 'scroll' event happen roughly\n  // at the same time so that `setupListeners` is called after component is unmount.\n\n\n  Sizer.prototype.componentWillUnmount = function () {\n    this.expandTrigger.removeEventListener('scroll', this.setupListeners);\n    this.contractTrigger.removeEventListener('scroll', this.setupListeners);\n  };\n\n  Sizer.prototype.setupListeners = function () {\n    var size = this.getSize();\n    var width = size.width,\n        height = size.height;\n    this.expandNotifier.style.width = width + SCROLL_OFFSET + \"px\";\n    this.expandNotifier.style.height = height + SCROLL_OFFSET + \"px\";\n    this.updateScrolling(size);\n    var onSizeChange = this.props.onSizeChange;\n    onSizeChange(size);\n  };\n\n  Sizer.prototype.createListeners = function () {\n    this.triggersRoot = document.createElement('div');\n    Object.assign(this.triggersRoot.style, styles.triggersRoot);\n    this.rootNode.appendChild(this.triggersRoot);\n    this.expandTrigger = document.createElement('div');\n    Object.assign(this.expandTrigger.style, styles.expandTrigger);\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.expandTrigger);\n    this.expandNotifier = document.createElement('div');\n    this.expandTrigger.appendChild(this.expandNotifier);\n    this.contractTrigger = document.createElement('div');\n    Object.assign(this.contractTrigger.style, styles.contractTrigger);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.contractTrigger);\n    this.contractNotifier = document.createElement('div');\n    Object.assign(this.contractNotifier.style, styles.contractNotifier);\n    this.contractTrigger.appendChild(this.contractNotifier);\n  };\n\n  Sizer.prototype.updateScrolling = function (size) {\n    var width = size.width,\n        height = size.height;\n    this.contractTrigger.scrollTop = height;\n    this.contractTrigger.scrollLeft = width;\n    this.expandTrigger.scrollTop = SCROLL_OFFSET;\n    this.expandTrigger.scrollLeft = SCROLL_OFFSET;\n  };\n\n  Sizer.prototype.render = function () {\n    var _a = this.props,\n        onSizeChange = _a.onSizeChange,\n        Container = _a.containerComponent,\n        style = _a.style,\n        scrollTop = _a.scrollTop,\n        scrollLeft = _a.scrollLeft,\n        restProps = __rest(_a, [\"onSizeChange\", \"containerComponent\", \"style\", \"scrollTop\", \"scrollLeft\"]);\n\n    return createElement(Container // NOTE: should have `position: relative`\n    , __assign({\n      forwardedRef: this.rootRef,\n      style: style ? __assign(__assign({}, styles.root), style) : styles.root\n    }, restProps));\n  };\n\n  Sizer.defaultProps = {\n    containerComponent: 'div'\n  };\n  return Sizer;\n}(Component);\n/*** A function that creates a new component that allows you to pass additional properties\r\n * to the wrapped component.\r\n */\n\n\nvar connectProps = function (WrappedComponent, getAdditionalProps) {\n  var storedAdditionalProps = getAdditionalProps();\n  var components = new Set();\n\n  var RenderComponent = /*#__PURE__*/function (_super) {\n    __extends(RenderComponent, _super);\n\n    function RenderComponent() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    RenderComponent.prototype.componentDidMount = function () {\n      components.add(this);\n    };\n\n    RenderComponent.prototype.componentWillUnmount = function () {\n      components.delete(this);\n    };\n\n    RenderComponent.prototype.render = function () {\n      return createElement(WrappedComponent, __assign({}, this.props, storedAdditionalProps));\n    };\n\n    return RenderComponent;\n  }(PureComponent);\n\n  RenderComponent.update = function () {\n    storedAdditionalProps = getAdditionalProps();\n    Array.from(components.values()).forEach(function (component) {\n      return component.forceUpdate();\n    });\n  };\n\n  return RenderComponent;\n};\n/** @internal */\n\n\nvar createStateHelper = function (component, controlledStateProperties) {\n  if (controlledStateProperties === void 0) {\n    controlledStateProperties = {};\n  }\n\n  var notifyStateChange = function (nextState, state) {\n    Object.keys(controlledStateProperties).forEach(function (propertyName) {\n      var changeEvent = controlledStateProperties[propertyName]();\n\n      if (changeEvent && nextState[propertyName] !== state[propertyName]) {\n        changeEvent(nextState[propertyName]);\n      }\n    });\n  };\n\n  var lastStateUpdater;\n  var initialState = null;\n  var lastInitialState = null;\n  var newState = null;\n  var shouldNotify = false;\n\n  var applyReducer = function (reduce, payload, callback) {\n    var stateUpdater = function (prevState) {\n      if (initialState === null) {\n        initialState = prevState;\n      }\n\n      var stateChange = reduce(__assign({}, prevState), payload);\n\n      var state = __assign(__assign({}, prevState), stateChange);\n\n      if (typeof callback === 'function') {\n        callback(state, prevState);\n      }\n\n      if (stateUpdater === lastStateUpdater) {\n        if (lastInitialState !== initialState) {\n          newState = state;\n\n          if (!shouldNotify) {\n            lastInitialState = initialState;\n            shouldNotify = true;\n          }\n        }\n\n        initialState = null;\n      }\n\n      return stateChange;\n    };\n\n    lastStateUpdater = stateUpdater;\n    component.setState(stateUpdater, function () {\n      if (shouldNotify) {\n        notifyStateChange(newState, lastInitialState);\n        shouldNotify = false;\n      }\n    });\n  };\n\n  var applyFieldReducer = function (field, reduce, payload) {\n    applyReducer(function (state) {\n      var _a;\n\n      return _a = {}, _a[field] = reduce(state[field], payload), _a;\n    });\n  };\n\n  return {\n    applyReducer: applyReducer,\n    applyFieldReducer: applyFieldReducer\n  };\n};\n\nvar makeBoundComponent = function (Target, components, exposed) {\n  var Component = /*#__PURE__*/function (_super) {\n    __extends(Component, _super);\n\n    function Component() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    Component.prototype.render = function () {\n      return createElement(Target, __assign({}, components, this.props));\n    };\n\n    return Component;\n  }(PureComponent);\n\n  Component.components = Target.components;\n  Object.assign(Component, exposed);\n  return Component;\n}; // type ITargetComponentStatic = new() => ITargetComponent;\n\n/** @internal */\n\n\nvar withComponents = function (components) {\n  return function (Target) {\n    var props = {};\n    var exposed = {};\n    var targetComponents = Target.components;\n    Object.entries(targetComponents).forEach(function (_a) {\n      var _b = __read(_a, 2),\n          fieldName = _b[0],\n          componentName = _b[1];\n\n      var component = components[componentName];\n\n      if (component && component !== Target[componentName]) {\n        props[fieldName] = component;\n      }\n\n      exposed[componentName] = component || Target[componentName];\n    });\n    return Object.keys(props).length > 0 ? makeBoundComponent(Target, props, exposed) : Target;\n  };\n};\n/* globals Element */\n\n/** @internal */\n\n\nvar RefType = shape({\n  current: instanceOf(typeof Element !== 'undefined' ? Element : Object)\n});\nexport { Action, DragDropProvider, DragSource, Draggable, DropTarget, Getter, PlaceholderWithRef, Plugin, PluginHost, RefHolder, RefType, Sizer, Template, TemplateConnector, TemplatePlaceholder, clear as clearSelection, connectProps, createStateHelper, withComponents };","map":{"version":3,"mappings":"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","names":["PluginHostContext","React.createContext","PositionContext","TemplateHostContext","__extends","_this","index","positionContext","indexes","fn","calculatedPosition","PluginIndexer","props","children","React.createElement","Consumer","React.Children","map","child","type","childPosition","memoize","Provider","key","String","value","React.PureComponent","PLUGIN_HOST_CONTEXT","POSITION_CONTEXT","TEMPLATE_HOST_CONTEXT","RERENDER_TEMPLATE_EVENT","Symbol","RERENDER_TEMPLATE_SCOPE_EVENT","UPDATE_CONNECTION_EVENT","withContext","Context","name","Component","__assign","_a","context","withHostAndPosition","PluginBase","pluginHost","_c","position","dependencies","plugin","container","registerPlugin","ensureDependencies","unregisterPlugin","Plugin","getRenderingData","params","templates","collect","filter","predicate","reverse","templateHost","id","template","forceUpdate","propsName","TemplatePlaceholderBase","registerSubscription","subscription","nextProps","length","shallowEqual","unregisterSubscription","restTemplates","slice","content","templateContent","templatePlaceholder","React.Component","TemplatePlaceholder","PlaceholderWithRef","forwardedRef","_super","host","PluginHostCore","PluginHostBase","PluginHost","getAvailableGetters","getGetterValue","getterName","get","trackedDependencies","getters","Proxy","target","prop","undefined","result","getOwnPropertyDescriptor","configurable","enumerable","ownKeys","knownKeys","reduce","acc","Object","defineProperty","isTrackedDependenciesChanged","prevTrackedDependencies","keys","assign","getAvailableActions","getAction","actionName","actions","_b","_d","action","nextParams","newParams","nextAction","ActionBase","Action","lastComputed","lastTrackedDependencies","lastResult","original","computed","GetterBase","broadcast","Getter","globalTemplateId","TemplateBase","Template","updateConnection","TemplateConnectorBase","contextType","TemplateConnector","TIMEOUT","delegate","touchStartTimeout","dragging","TouchStrategy","clearTimeout","e","touches","x","y","setTimeout","onStart","cancelWaiting","clientX","clientY","preventDefault","onMove","changedTouches","onEnd","mouseInitialOffset","gestureCover","toggleGestureCover","toggle","cursor","style","pointerEvents","top","right","left","bottom","opacity","zIndex","document","createElement","body","appendChild","forEach","clear","selection","window","getSelection","empty","removeAllRanges","BOUNDARY","clamp","min","max","Math","isBoundExceeded","initialX","initialY","MouseStrategy","dragStarted","element","elementFromPoint","getComputedStyle","eventEmitter","getSharedEventEmitter","EventEmitter","addEventListener","emit","passive","RefHolder","React.forwardRef","ref","React.isValidElement","React.cloneElement","node","current","display","draggingHandled","unstable_batchedUpdates","onUpdate","mouseStrategy","touchStrategy","elementRef","React.createRef","mouseDownListener","bind","touchStartListener","globalListener","Draggable","subscribe","setupNodeSubscription","eventParams","isMouseEvent","end","detachNodeEvents","unsubscribe","removeEventListener","isWaiting","start","saveEvent","move","isDragging","dragItem","DragDropContext","payload","dragEmitter","DragDropProviderCore","clientOffset","defaultProps","onChange","dragDropProvider","DragDropProvider","DragSource","React.useContext","update","onEnter","args","onOver","onLeave","onDrop","isOver","handleDrag","DropTarget","getBoundingClientRect","only","SCROLL_OFFSET","styles","root","triggersRoot","height","width","overflow","visibility","expandTrigger","contractTrigger","minHeight","minWidth","contractNotifier","rootNode","clientHeight","clientWidth","setupListeners","updateScrolling","rootRef","Sizer","createListeners","prevProps","scrollTop","scrollLeft","getSize","size","expandNotifier","onSizeChange","Container","restProps","containerComponent","connectProps","WrappedComponent","getAdditionalProps","storedAdditionalProps","components","Set","RenderComponent","add","delete","Array","from","values","createStateHelper","component","controlledStateProperties","notifyStateChange","nextState","state","propertyName","changeEvent","lastStateUpdater","initialState","lastInitialState","newState","shouldNotify","applyReducer","callback","stateUpdater","prevState","stateChange","setState","applyFieldReducer","field","makeBoundComponent","Target","exposed","withComponents","targetComponents","entries","fieldName","componentName","RefType","PropTypes.shape","PropTypes.instanceOf","Element"],"sources":["/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/contexts.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/plugin-indexer.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/constants.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/utils/with-props-from-context.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/plugin.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/template-placeholder.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/plugin-host.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/helpers.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/action.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/getter.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/template.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/plugin-based/template-connector.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/draggable/touch-strategy.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/draggable/gesture-cover.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/draggable/selection-utils.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/draggable/mouse-strategy.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/draggable/shared-events.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/ref-holder.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/draggable.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/drag-drop/context.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/drag-drop/provider.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/drag-drop/source.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/drag-drop/target.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/sizer.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/utils/connect-props.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/utils/state-helper.ts","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/utils/with-components.tsx","/home/note/Lucas/bankpayapp2/node_modules/@devexpress/dx-react-core/src/utils/ref-type.ts"],"sourcesContent":["import * as React from 'react';\nimport { PluginHost, PluginPositionFn } from '@devexpress/dx-core';\n\n/** @internal */\nexport interface TemplateHostInterface {\n  params(...args): any;\n  templates(...args): any;\n}\n\n/** @internal */\nexport const PluginHostContext = React.createContext<PluginHost | null>(null);\n/** @internal */\nexport const PositionContext = React.createContext<PluginPositionFn>(() => []);\n/** @internal */\nexport const TemplateHostContext = React.createContext<TemplateHostInterface | null>(null);\n","import * as React from 'react';\nimport { PluginPositionFn } from '@devexpress/dx-core';\nimport { PositionContext } from './contexts';\n\ntype MemoizedPluginPositionFn =\n  (index: number, positionContext: PluginPositionFn) => PluginPositionFn;\n\ntype PluginIndexerProps = {\n  children: React.ReactNode;\n};\n\n/** @internal */\nexport class PluginIndexer extends React.PureComponent<PluginIndexerProps> {\n  indexes: { [index: number]: PluginPositionFn } = {};\n  memoize: MemoizedPluginPositionFn = (index, positionContext) => {\n    if (this.indexes[index]) return this.indexes[index];\n\n    const fn: PluginPositionFn = () => {\n      const calculatedPosition = positionContext();\n      return [...calculatedPosition, index];\n    };\n    this.indexes[index] = fn;\n\n    return fn;\n  }\n  render() {\n    const { children } = this.props;\n    return (\n      <PositionContext.Consumer>\n        {positionContext => (\n          React.Children.map(children, (child: any, index: number) => {\n            if (!child || !child.type) return child;\n            const childPosition = this.memoize(index, positionContext);\n\n            return (\n              <PositionContext.Provider key={String(index)} value={childPosition}>\n                {child}\n              </PositionContext.Provider>\n            );\n          })\n        )}\n      </PositionContext.Consumer>\n    );\n  }\n}\n","/** @internal */\nexport const PLUGIN_HOST_CONTEXT = 'dxcore_pluginHost_context';\n/** @internal */\nexport const POSITION_CONTEXT = 'dxcore_position_context';\n/** @internal */\nexport const TEMPLATE_HOST_CONTEXT = 'dxcore_templateHost_context';\n\n/** @internal */\nexport const RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\n/** @internal */\nexport const RERENDER_TEMPLATE_SCOPE_EVENT = Symbol('rerenderTemplateScope');\n/** @internal */\nexport const UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n","import * as React from 'react';\nimport { PluginHostContext, PositionContext } from '../plugin-based/contexts';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from '../plugin-based/constants';\n\n/** @internal */\nexport const withContext = (Context, name) => Component => props => (\n  <Context.Consumer>\n    {context => (\n      <Component {...props} {...{ [name]: context }} />\n    )}\n  </Context.Consumer>\n);\n\n/** @internal */\nexport const withHostAndPosition = Component => withContext(\n  PluginHostContext,\n  PLUGIN_HOST_CONTEXT,\n)(withContext(PositionContext, POSITION_CONTEXT)(Component));\n","import * as React from 'react';\nimport { InnerPlugin, IDependency } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\n\nexport interface PluginProps {\n  /** React elements that expose the plugin's state and actions and render the plugin's UI. */\n  children: React.ReactNode;\n  name?: string;\n  dependencies?: IDependency[];\n}\n\n/** @internal */\nexport class PluginBase extends React.PureComponent<PluginProps & PluginContextProps> {\n  plugin!: InnerPlugin;\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: position } = this.props;\n    const { name, dependencies } = this.props;\n    this.plugin = {\n      position,\n      name,\n      dependencies,\n      container: true,\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.ensureDependencies();\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.ensureDependencies();\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <PluginIndexer>\n        {children}\n      </PluginIndexer>\n    );\n  }\n}\n\nexport const Plugin: React.ComponentType<PluginProps> = withHostAndPosition(PluginBase);\n","import * as React from 'react';\nimport { shallowEqual } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, RERENDER_TEMPLATE_EVENT,\n  TEMPLATE_HOST_CONTEXT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withContext } from '../utils/with-props-from-context';\nimport { PluginHostContext, TemplateHostContext, TemplateHostInterface } from './contexts';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { TemplateBase } from './template';\n\nexport interface TemplatePlaceholderProps {\n  /** The name of a template to be rendered. */\n  name?: string;\n  /** An object passed to the related template. */\n  params?: object;\n  children?: (content) => any;\n}\ninterface TemplateHostContextProps {\n  [TEMPLATE_HOST_CONTEXT: string]: TemplateHostInterface;\n}\n\ntype Props = TemplatePlaceholderProps & PluginContextProps & TemplateHostContextProps;\n\nconst getRenderingData = (props: Props): { params?: object, templates: TemplateBase[] } => {\n  const { name, params } = props;\n  if (name) {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = props;\n    return {\n      params,\n      templates: pluginHost.collect(`${name}Template`)\n        .filter(template => template.predicate(params))\n        .reverse(),\n    };\n  }\n  const { [TEMPLATE_HOST_CONTEXT]: templateHost } = props;\n  return {\n    params: params || templateHost.params(),\n    templates: templateHost.templates(),\n  };\n};\n\nclass TemplatePlaceholderBase extends React.Component<Props> {\n  subscription = {\n    [RERENDER_TEMPLATE_EVENT]: (id: number) => {\n      if (this.template && this.template.id === id) {\n        this.forceUpdate();\n      }\n    },\n    [RERENDER_TEMPLATE_SCOPE_EVENT]: (name: string) => {\n      const { name: propsName } = this.props;\n      if (propsName === name) {\n        this.forceUpdate();\n      }\n    },\n  };\n  template: TemplateBase | null = null;\n  params?: object = {};\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  shouldComponentUpdate(nextProps: Props) {\n    const { params, templates } = getRenderingData(nextProps);\n    const [template] = templates;\n    const { children } = this.props;\n\n    return children !== nextProps.children\n      || templates.length !== getRenderingData(this.props).templates.length\n      || this.template !== template\n      || !shallowEqual(this.params, params);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  render() {\n    const { params, templates } = getRenderingData(this.props);\n\n    this.params = params;\n    [this.template] = templates;\n    const restTemplates = templates.slice(1);\n\n    let content: ((...args) => any) | null = null;\n    if (this.template) {\n      const { children: templateContent } = this.template;\n\n      content = templateContent() || null;\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    const { children: templatePlaceholder } = this.props;\n    return (\n      <TemplateHostContext.Provider\n        value={{\n          templates: () => restTemplates,\n          params: () => this.params,\n        }}\n      >\n        {templatePlaceholder ? templatePlaceholder(content) : content}\n      </TemplateHostContext.Provider>\n    );\n  }\n}\n\n/** A React component to which a related Template is rendered. */\nexport const TemplatePlaceholder: React.ComponentType<TemplatePlaceholderProps> = withContext(\n  PluginHostContext, PLUGIN_HOST_CONTEXT,\n)(\n  withContext(TemplateHostContext, TEMPLATE_HOST_CONTEXT)(TemplatePlaceholderBase),\n);\n\nexport const PlaceholderWithRef: React.ComponentType<TemplatePlaceholderProps & {\n  forwardedRef?: any;\n}> = ({ params, forwardedRef }) => (\n  <TemplatePlaceholder\n    params={{\n      ...params,\n      forwardedRef,\n    }}\n  />\n);\n","import * as React from 'react';\nimport { PluginHost as PluginHostCore } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { TemplatePlaceholder } from './template-placeholder';\nimport { PluginHostContext } from './contexts';\n\nexport interface PluginHostProps {\n  /** Plugin React elements. */\n  children: React.ReactNode;\n}\n\n/** @internal */\nclass PluginHostBase extends React.PureComponent<PluginHostProps> {\n  host: PluginHostCore;\n\n  constructor(props: PluginHostProps) {\n    super(props);\n\n    this.host = new PluginHostCore();\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <PluginHostContext.Provider value={this.host}>\n        <PluginIndexer>\n          {children}\n        </PluginIndexer>\n        <TemplatePlaceholder name=\"root\" />\n      </PluginHostContext.Provider>\n    );\n  }\n}\n\nexport const PluginHost: React.ComponentType<PluginHostProps> = PluginHostBase;\n","import { shallowEqual } from '@devexpress/dx-core';\n\n/** @internal */\nexport const getAvailableGetters = (\n  pluginHost,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = {};\n\n  let getters;\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        const result = getGetterValue(prop);\n        trackedDependencies[prop] = result;\n        return result;\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Getter');\n      },\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter')\n      .reduce((acc, getterName) => {\n        Object.defineProperty(acc, getterName, {\n          get: () => {\n            const result = getGetterValue(getterName);\n            trackedDependencies[getterName] = result;\n            return result;\n          },\n        });\n        return acc;\n      }, {});\n  }\n\n  return { getters, trackedDependencies };\n};\n\n/** @internal */\nexport const isTrackedDependenciesChanged = (\n  pluginHost,\n  prevTrackedDependencies,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = Object.keys(prevTrackedDependencies)\n    // tslint:disable-next-line: prefer-object-spread\n    .reduce((acc, getterName) => Object.assign(acc, {\n      [getterName]: getGetterValue(getterName),\n    }), {});\n\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n\n/** @internal */\nexport const getAvailableActions = (\n  pluginHost,\n  getAction = actionName => pluginHost.collect(`${actionName}Action`).slice().reverse()[0],\n) => {\n  let actions;\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Action');\n      },\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action')\n      .reduce((acc, actionName) => {\n        Object.defineProperty(acc, actionName, {\n          get: () => getAction(actionName),\n        });\n        return acc;\n      }, {});\n  }\n  return actions;\n};\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { Getters, Actions } from '../types';\n\nexport interface ActionProps {\n  /** The action name. */\n  name: string;\n  /** A function that is called when the action is executed. */\n  action: (payload: any, getters: Getters, actions: Actions) => void;\n}\n\nclass ActionBase extends React.PureComponent<ActionProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Action`]: (params) => {\n        const { action } = this.props;\n        const { getters } = getAvailableGetters(\n          pluginHost,\n          getterName => pluginHost.get(`${getterName}Getter`, this.plugin),\n        );\n        let nextParams = params;\n        const actions = getAvailableActions(\n          pluginHost,\n          actionName => (actionName === name\n            ? (newParams) => { nextParams = newParams; }\n            : pluginHost.collect(`${actionName}Action`, this.plugin).slice().reverse()[0]),\n        );\n        action(params, getters, actions);\n        const nextAction = pluginHost.collect(`${name}Action`, this.plugin).slice().reverse()[0];\n        if (nextAction) {\n          nextAction(nextParams);\n        }\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Action: React.ComponentType<ActionProps> = withHostAndPosition(ActionBase);\n","import * as React from 'react';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { UPDATE_CONNECTION_EVENT, PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { ComputedFn } from '../types';\n\nexport interface GetterProps {\n  /** The Getter's name. */\n  name: string;\n  /** The shared value. */\n  value?: any;\n  /*** A function that calculates a value depending on the values other Getters expose.\n   * The value is computed each time a related Getter's value changes.\n   * Applies only if `value` is not defined.\n   */\n  computed?: ComputedFn;\n}\n\nclass GetterBase extends React.PureComponent<GetterProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    let lastComputed;\n    let lastTrackedDependencies = {};\n    let lastResult;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Getter`]: (original) => {\n        const { value, computed } = this.props;\n        if (computed === undefined) return value;\n\n        const getGetterValue = getterName => ((getterName === name)\n          ? original\n          : pluginHost.get(`${getterName}Getter`, this.plugin));\n\n        if (computed === lastComputed\n          && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n          return lastResult;\n        }\n\n        const { getters, trackedDependencies } = getAvailableGetters(pluginHost, getGetterValue);\n        const actions = getAvailableActions(pluginHost);\n\n        lastComputed = computed;\n        lastTrackedDependencies = trackedDependencies;\n        lastResult = computed(getters, actions);\n        return lastResult;\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Getter: React.ComponentType<GetterProps> = withHostAndPosition(GetterBase);\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, POSITION_CONTEXT,\n  RERENDER_TEMPLATE_EVENT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\n\nexport interface TemplateProps {\n  // tslint:disable-next-line:max-line-length\n  /** The template name. The `root` name is reserved. A template called `root` is rendered as the plugin based component's root. */\n  name: string;\n  // tslint:disable-next-line:max-line-length\n  /** A predicate function that returns a Boolean value that specifies whether the template should be rendered. */\n  predicate?: (params: object) => boolean;\n  /** A markup or function that returns a markup based on the specified parameters. */\n  children: React.ReactNode | ((params: object) => React.ReactNode);\n}\n\nlet globalTemplateId = 0;\n/** @internal */\nexport class TemplateBase extends React.PureComponent<TemplateProps & PluginContextProps> {\n  id: number;\n  plugin: InnerPlugin;\n  children: () => any;\n\n  constructor(props) {\n    super(props);\n\n    this.children = () => void 0;\n\n    globalTemplateId += 1;\n    this.id = globalTemplateId;\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name, predicate } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Template`]: {\n        id: this.id,\n        predicate: params => (predicate ? predicate(params) : true),\n        children: () => {\n          const { children } = this.props;\n          return children;\n        },\n      },\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    const { name } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  render() {\n    return null;\n  }\n}\n\n/*** A React component that defines a markup that is rendered\n * as the corresponding TemplatePlaceholder.\n */\nexport const Template: React.ComponentType<TemplateProps> = withHostAndPosition(TemplateBase);\n","import * as React from 'react';\nimport { UPDATE_CONNECTION_EVENT } from './constants';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PluginHostContext } from './contexts';\nimport { Getters, Actions } from '../types';\n\nexport interface TemplateConnectorProps {\n  /** A function that renders a markup using Getters and Actions passed as arguments. */\n  children: (\n    getters: Getters,\n    actions: Actions,\n  ) => React.ReactNode;\n}\n\n/** @internal */\nclass TemplateConnectorBase extends React.Component<TemplateConnectorProps> {\n  trackedDependencies: { [key: string]: { get: (args) => any }};\n  subscription: { [UPDATE_CONNECTION_EVENT: string]: (args) => void };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.trackedDependencies = {};\n    this.subscription = {\n      [UPDATE_CONNECTION_EVENT]: () => this.updateConnection(),\n    };\n  }\n\n  componentDidMount() {\n    const pluginHost = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  componentWillUnmount() {\n    const pluginHost = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  updateConnection() {\n    const pluginHost = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    const pluginHost = this.context;\n    const { children } = this.props;\n\n    const { getters, trackedDependencies } = getAvailableGetters(pluginHost);\n    this.trackedDependencies = trackedDependencies;\n    const actions = getAvailableActions(pluginHost);\n\n    return children(getters, actions);\n  }\n}\n\nTemplateConnectorBase.contextType = PluginHostContext;\n\n/** A React component that provides access to Getters and Actions within a Template. */\nexport const TemplateConnector: React.ComponentType<TemplateConnectorProps> = TemplateConnectorBase;\n","const TIMEOUT = 180;\n\n/** @internal */\nexport class TouchStrategy {\n  delegate: any;\n  touchStartTimeout: any;\n  dragging: boolean;\n  mouseInitialOffset: null;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  isWaiting() {\n    return !!this.touchStartTimeout;\n  }\n\n  cancelWaiting() {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = undefined;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e.touches[0];\n    this.touchStartTimeout = setTimeout(() => {\n      this.delegate.onStart({ x, y });\n      this.dragging = true;\n    }, TIMEOUT);\n  }\n\n  move(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.touches[0];\n      e.preventDefault();\n      this.delegate.onMove({ x: clientX, y: clientY });\n    }\n  }\n\n  end(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.changedTouches[0];\n      this.delegate.onEnd({ x: clientX, y: clientY });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals document:true */\n\nlet gestureCover: HTMLElement;\n/** @internal */\nexport const toggleGestureCover = (toggle, cursor?) => {\n  let style: React.CSSProperties = {\n    pointerEvents: toggle ? 'all' : 'none',\n  };\n  if (toggle && cursor) {\n    style = {\n      ...style,\n      cursor,\n    };\n  }\n  if (!gestureCover) {\n    style = {\n      ...style,\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647,\n    };\n\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n  Object.keys(style).forEach((key) => { gestureCover.style[key] = style[key]; });\n};\n","/* globals document:true window:true */\n\n/** @internal */\nexport const clear = () => {\n  const selection = window.getSelection && window.getSelection();\n\n  if (selection) {\n    if (selection.empty) {\n      selection.empty();\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges();\n    }\n  }\n};\n","/* globals window:true document:true */\n\nimport { toggleGestureCover } from './gesture-cover';\nimport { clear } from './selection-utils';\n\nconst BOUNDARY = 10;\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\nconst isBoundExceeded = (\n  { x: initialX, y: initialY }, { x, y },\n) => clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x\n  || clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n\n/** @internal */\nexport class MouseStrategy {\n  delegate: any;\n  mouseInitialOffset: any;\n  dragging: boolean;\n  e: any;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e;\n    this.e = e;\n    this.mouseInitialOffset = { x, y };\n  }\n\n  move(e) {\n    const { clientX: x, clientY: y } = e;\n    let dragStarted = false;\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, { x, y })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        clear();\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({ x, y });\n    }\n    if (dragStarted) {\n      const element = document.elementFromPoint(x, y);\n      const cursor = element ? window.getComputedStyle(element).cursor : null;\n      toggleGestureCover(true, cursor);\n    }\n  }\n\n  end(e) {\n    if (this.dragging) {\n      const { clientX: x, clientY: y } = e;\n      toggleGestureCover(false);\n      this.delegate.onEnd({ x, y });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals window:true */\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nlet eventEmitter;\n/** @internal */\nexport const getSharedEventEmitter = () => {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel']\n      .forEach(name => window.addEventListener(\n        name, e => eventEmitter.emit([name, e]), { passive: false },\n      ));\n  }\n  return eventEmitter;\n};\n","import * as React from 'react';\n\n/** @internal */\nexport const RefHolder = React.forwardRef((\n  { children }: { children: React.ReactNode },\n  ref: React.MutableRefObject<any> | React.RefCallback<any> | null,\n) => {\n  return React.isValidElement(children) ?\n    typeof children.type === 'string'\n      ? React.cloneElement(children, { ref })\n      : React.cloneElement(children, { forwardedRef: children.props?.forwardedRef ? (node) => {\n        children.props.forwardedRef(node);\n        if (typeof ref === 'function') {\n          ref(node);\n        } else if (ref) {\n          ref.current = node;\n        }\n      } : ref }) :\n    React.createElement(\n      'div',\n      { ref, style: { display: 'contents' } },\n      children,\n    );\n});\n","import * as React from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { TouchStrategy } from './draggable/touch-strategy';\nimport { MouseStrategy } from './draggable/mouse-strategy';\nimport { getSharedEventEmitter } from './draggable/shared-events';\nimport { clear } from './draggable/selection-utils';\nimport { RefHolder } from './ref-holder';\n\nconst draggingHandled = Symbol('draggingHandled');\n\ntype DraggableProps = {\n  onStart?: (args) => void;\n  onUpdate?: (args) => void;\n  onEnd?: (args) => void;\n  dragItem?: React.MutableRefObject<any> | React.RefCallback<any> | null;\n};\n\n/** @internal */\nexport class Draggable extends React.PureComponent<DraggableProps> {\n  mouseStrategy: MouseStrategy;\n  touchStrategy: TouchStrategy;\n  elementRef: React.MutableRefObject<Element | null>;\n  eventParams: { e: any, isMouseEvent: boolean } | null = null;\n  detachNodeEvents: any = null;\n\n  constructor(props) {\n    super(props);\n    const delegate = {\n      onStart: ({ x, y }) => {\n        const { onStart } = this.props;\n        if (!onStart) return;\n        unstable_batchedUpdates(() => {\n          onStart({ x, y });\n        });\n      },\n      onMove: ({ x, y }) => {\n        const { onUpdate } = this.props;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(() => {\n          onUpdate({ x, y });\n        });\n      },\n      onEnd: ({ x, y }) => {\n        const { onEnd } = this.props;\n        if (!onEnd) return;\n        unstable_batchedUpdates(() => {\n          onEnd({ x, y });\n        });\n      },\n    };\n\n    this.mouseStrategy = new MouseStrategy(delegate);\n    this.touchStrategy = new TouchStrategy(delegate);\n    this.elementRef = React.createRef();\n\n    this.mouseDownListener = this.mouseDownListener.bind(this);\n    this.touchStartListener = this.touchStartListener.bind(this);\n    this.globalListener = this.globalListener.bind(this);\n  }\n\n  componentDidMount() {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  }\n\n  componentDidUpdate() {\n    this.setupNodeSubscription();\n  }\n\n  componentWillUnmount() {\n    if (this.eventParams) {\n      const { isMouseEvent, e } = this.eventParams;\n      if (isMouseEvent) {\n        this.mouseStrategy.end(e);\n      } else {\n        this.touchStrategy.end(e);\n      }\n      this.eventParams = null;\n    }\n    this.detachNodeEvents?.();\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  }\n\n  setupNodeSubscription() {\n    const node = this.elementRef.current;\n    if (!node) return;\n    this.detachNodeEvents?.();\n    node.addEventListener('mousedown', this.mouseDownListener);\n    node.addEventListener('touchstart', this.touchStartListener, { passive: true });\n    this.detachNodeEvents = () => {\n      node.removeEventListener('mousedown', this.mouseDownListener);\n      node.removeEventListener('touchstart', this.touchStartListener);\n    };\n  }\n\n  mouseDownListener(e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    e.preventDefault();\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  touchStartListener(e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  saveEvent(e, isMouseEvent) {\n    this.eventParams = {\n      e,\n      isMouseEvent,\n    };\n  }\n\n  globalListener([name, e]) {\n    switch (name) {\n      case 'mousemove':\n        this.saveEvent(e, true);\n        this.mouseStrategy.move(e);\n        break;\n      case 'mouseup':\n        this.eventParams = null;\n        this.mouseStrategy.end(e);\n        break;\n      case 'touchmove': {\n        this.saveEvent(e, false);\n        this.touchStrategy.move(e);\n        break;\n      }\n      case 'touchend':\n      case 'touchcancel': {\n        this.eventParams = null;\n        this.touchStrategy.end(e);\n        break;\n      }\n      default:\n        break;\n    }\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  }\n\n  render() {\n    const { children, dragItem } = this.props;\n    return <RefHolder\n      ref={(node: Element | null) => {\n        this.elementRef.current = node;\n        if (typeof dragItem === 'function') {\n          dragItem(node);\n        } else if (dragItem) {\n          dragItem.current = node;\n        }\n      }}\n    >\n      {children}\n    </RefHolder>;\n  }\n}\n","import * as React from 'react';\nimport { DragDropProviderCore } from './provider';\n\n/** @internal */\nexport const DragDropContext = React.createContext<DragDropProviderCore | null>(null);\n","import * as React from 'react';\n\nimport { EventEmitter } from '@devexpress/dx-core';\nimport { DragDropContext } from './context';\n\n/** @internal */\nexport class DragDropProviderCore {\n  payload: null;\n  dragEmitter: EventEmitter;\n\n  constructor() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n\n  start(payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  update(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  end(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload, end: true });\n    this.payload = null;\n  }\n}\n\nconst defaultProps = {\n  onChange: ({ payload, clientOffset }) => {},\n};\ntype DragDropProviderDefaultProps = Readonly<typeof defaultProps>;\ntype DragDropProviderProps = Partial<DragDropProviderDefaultProps>;\n\n/** @internal */\n// tslint:disable-next-line: max-classes-per-file\nexport class DragDropProvider extends React.Component<\n  DragDropProviderProps & DragDropProviderDefaultProps\n> {\n  static defaultProps = defaultProps;\n  dragDropProvider: DragDropProviderCore;\n\n  constructor(props) {\n    super(props);\n    const { onChange } = this.props;\n\n    this.dragDropProvider = new DragDropProviderCore();\n\n    this.dragDropProvider.dragEmitter.subscribe(({ payload, clientOffset, end }) => {\n      onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset,\n      });\n    });\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <DragDropContext.Provider value={this.dragDropProvider}>\n        {children}\n      </DragDropContext.Provider>\n    );\n  }\n}\n","import * as React from 'react';\nimport { DragDropContext } from './context';\nimport { Draggable } from '../draggable';\n\nconst defaultProps = {\n  onStart: ({ clientOffset }) => {},\n  onUpdate: ({ clientOffset }) => {},\n  onEnd: ({ clientOffset }) => {},\n};\ntype DragSourceDefaultProps = Readonly<typeof defaultProps>;\ntype DragSourceProps = {\n  payload: any;\n  ref?: React.Ref<Element>;\n} & Partial<DragSourceDefaultProps>;\n\n/** @internal */\nexport const DragSource: React.FC<DragSourceProps> = React.forwardRef(({\n  onStart, onUpdate, onEnd, payload, children,\n}, ref) => {\n  const context = React.useContext(DragDropContext);\n  const dragDropProvider = context;\n\n  return (\n    <Draggable\n      onStart={({ x, y }) => {\n        dragDropProvider?.start(payload, { x, y });\n        onStart?.({ clientOffset: { x, y } });\n      }}\n      onUpdate={({ x, y }) => {\n        dragDropProvider?.update({ x, y });\n        onUpdate?.({ clientOffset: { x, y } });\n      }}\n      onEnd={({ x, y }) => {\n        dragDropProvider?.end({ x, y });\n        onEnd?.({ clientOffset: { x, y } });\n      }}\n      dragItem={ref}\n    >\n      {children}\n    </Draggable>\n  );\n});\nDragSource.defaultProps = defaultProps;\n","import * as React from 'react';\nimport { RefHolder } from '../ref-holder';\nimport { DragDropContext } from './context';\n\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\n\nconst defaultProps = {\n  onEnter: (args) => {},\n  onOver: (args) => {},\n  onLeave: (args) => {},\n  onDrop: (args) => {},\n};\ntype DropTargetDefaultProps = Readonly<typeof defaultProps>;\n\n/** @internal */\nexport class DropTarget extends React.Component<DropTargetDefaultProps> {\n  static defaultProps = defaultProps;\n  isOver: boolean;\n  elementRef: React.RefObject<Element>;\n\n  constructor(props) {\n    super(props);\n\n    this.isOver = false;\n\n    this.handleDrag = this.handleDrag.bind(this);\n\n    this.elementRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.subscribe(this.handleDrag);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentWillUnmount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.unsubscribe(this.handleDrag);\n  }\n\n  handleDrag({ payload, clientOffset, end }) {\n    const {\n      left,\n      top,\n      right,\n      bottom,\n    } = this.elementRef.current!.getBoundingClientRect();\n    const {\n      onDrop, onEnter, onLeave, onOver,\n    } = this.props;\n    const isOver = clientOffset\n      && clamp(clientOffset.x, left, right) === clientOffset.x\n      && clamp(clientOffset.y, top, bottom) === clientOffset.y;\n\n    if (!this.isOver && isOver) onEnter({ payload, clientOffset });\n    if (this.isOver && isOver) onOver({ payload, clientOffset });\n    if (this.isOver && !isOver) onLeave({ payload, clientOffset });\n    if (isOver && end) onDrop({ payload, clientOffset });\n\n    this.isOver = isOver && !end;\n  }\n\n  render() {\n    const { children } = this.props;\n    return <RefHolder ref={this.elementRef}>{React.Children.only(children)}</RefHolder>;\n  }\n}\n\nDropTarget.contextType = DragDropContext;\n","/* globals document:true */\n\nimport * as React from 'react';\nimport { SizerProps, Size } from './types';\nimport { shallowEqual } from '@devexpress/dx-core';\n\nconst SCROLL_OFFSET = 2;\nconst styles: Record<string, React.CSSProperties> = {\n  root: {\n    position: 'relative',\n  },\n  triggersRoot: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0,\n  },\n  expandTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n    minHeight: '1px',\n    minWidth: '1px',\n  },\n  contractNotifier: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n    minHeight: '2px',\n    minWidth: '2px',\n  },\n};\n\n/** @internal */\nexport class Sizer extends React.Component<SizerProps> {\n  static defaultProps = {\n    containerComponent: 'div',\n  };\n\n  rootRef: React.RefObject<HTMLElement>;\n\n  rootNode!: HTMLElement;\n  triggersRoot!: HTMLDivElement;\n  expandTrigger!: HTMLDivElement;\n  expandNotifier!: HTMLDivElement;\n  contractTrigger!: HTMLDivElement;\n  contractNotifier!: HTMLDivElement;\n\n  constructor(props) {\n    super(props);\n\n    this.setupListeners = this.setupListeners.bind(this);\n    this.updateScrolling = this.updateScrolling.bind(this);\n    this.rootRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.rootNode = this.rootRef.current!;\n    this.createListeners();\n\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.setupListeners();\n  }\n\n  shouldComponentUpdate(prevProps) {\n    if (prevProps.scrollTop !== this.props.scrollTop ||\n      prevProps.scrollLeft !== this.props.scrollLeft ||\n      (prevProps.style && this.props.style &&\n        !shallowEqual(prevProps.style, this.props.style)) ||\n        (prevProps.style && !this.props.style) ||\n        prevProps.children !== this.props.children) {\n      return true;\n    }\n    return false;\n  }\n\n  componentDidUpdate() {\n    // We can scroll the VirtualTable manually only by changing\n    // containter's (rootNode) scrollTop property.\n    // Viewport changes its own properties automatically.\n    const { scrollTop, scrollLeft } = this.props;\n    if (scrollTop !== undefined && scrollTop > -1) {\n      this.rootNode.scrollTop = scrollTop;\n    }\n    if (scrollLeft !== undefined && scrollLeft > -1) {\n      this.rootNode.scrollLeft = scrollLeft;\n    }\n    this.updateScrolling(this.getSize());\n  }\n\n  // There is no need to remove listeners as divs are removed from DOM when component is unmount.\n  // But there is a little chance that component unmounting and 'scroll' event happen roughly\n  // at the same time so that `setupListeners` is called after component is unmount.\n  componentWillUnmount() {\n    this.expandTrigger.removeEventListener('scroll', this.setupListeners);\n    this.contractTrigger.removeEventListener('scroll', this.setupListeners);\n  }\n\n  getSize = (): Size => ({\n    height: this.rootNode.clientHeight,\n    width: this.rootNode.clientWidth,\n  })\n\n  setupListeners() {\n    const size = this.getSize();\n    const { width, height } = size;\n\n    this.expandNotifier.style.width = `${width + SCROLL_OFFSET}px`;\n    this.expandNotifier.style.height = `${height + SCROLL_OFFSET}px`;\n\n    this.updateScrolling(size);\n\n    const { onSizeChange } = this.props;\n    onSizeChange(size);\n  }\n\n  createListeners() {\n    this.triggersRoot = document.createElement('div');\n    Object.assign(this.triggersRoot.style, styles.triggersRoot);\n    this.rootNode!.appendChild(this.triggersRoot);\n\n    this.expandTrigger = document.createElement('div');\n    Object.assign(this.expandTrigger.style, styles.expandTrigger);\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.expandTrigger);\n\n    this.expandNotifier = document.createElement('div');\n    this.expandTrigger.appendChild(this.expandNotifier);\n\n    this.contractTrigger = document.createElement('div');\n    Object.assign(this.contractTrigger.style, styles.contractTrigger);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.contractTrigger);\n\n    this.contractNotifier = document.createElement('div');\n    Object.assign(this.contractNotifier.style, styles.contractNotifier);\n    this.contractTrigger.appendChild(this.contractNotifier);\n  }\n\n  updateScrolling(size) {\n    const { width, height } = size;\n    this.contractTrigger.scrollTop = height;\n    this.contractTrigger.scrollLeft = width;\n    this.expandTrigger.scrollTop = SCROLL_OFFSET;\n    this.expandTrigger.scrollLeft = SCROLL_OFFSET;\n  }\n\n  render() {\n    const {\n      onSizeChange,\n      containerComponent: Container,\n      style,\n      scrollTop,\n      scrollLeft,\n      ...restProps\n    } = this.props;\n\n    return (\n      <Container // NOTE: should have `position: relative`\n        forwardedRef={this.rootRef}\n        style={style ? { ...styles.root, ...style } : styles.root}\n        {...restProps}\n      />\n    );\n  }\n}\n","import * as React from 'react';\n\ntype RenderComponentProps = {\n  update: () => void;\n};\n\n/*** A function that creates a new component that allows you to pass additional properties\n * to the wrapped component.\n */\nexport const connectProps = (\n  WrappedComponent: React.ComponentType<any>, getAdditionalProps: () => object,\n): React.ComponentType<any> & { update(): void } => {\n  let storedAdditionalProps = getAdditionalProps();\n  const components = new Set<React.Component>();\n  class RenderComponent extends React.PureComponent<RenderComponentProps> {\n    static update: () => void;\n\n    componentDidMount() {\n      components.add(this);\n    }\n\n    componentWillUnmount() {\n      components.delete(this);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} {...storedAdditionalProps} />;\n    }\n  }\n  RenderComponent.update = () => {\n    storedAdditionalProps = getAdditionalProps();\n    Array.from(components.values()).forEach(component => component.forceUpdate());\n  };\n  return RenderComponent;\n};\n","import { CreateStateHelperFn } from '../types';\n\n/** @internal */\nexport const createStateHelper: CreateStateHelperFn = (\n  component, controlledStateProperties = {},\n) => {\n  const notifyStateChange = (nextState, state) => {\n    Object.keys(controlledStateProperties).forEach((propertyName) => {\n      const changeEvent = controlledStateProperties[propertyName]();\n      if (changeEvent && nextState[propertyName] !== state[propertyName]) {\n        changeEvent(nextState[propertyName]);\n      }\n    });\n  };\n\n  let lastStateUpdater: (state) => void;\n  let initialState = null;\n  let lastInitialState = null;\n  let newState = null;\n  let shouldNotify = false;\n\n  const applyReducer = (reduce, payload?, callback?) => {\n    const stateUpdater = (prevState) => {\n      if (initialState === null) {\n        initialState = prevState;\n      }\n      const stateChange = reduce({ ...prevState }, payload);\n      const state = { ...prevState, ...stateChange };\n\n      if (typeof callback === 'function') {\n        callback(state, prevState);\n      }\n      if (stateUpdater === lastStateUpdater) {\n        if (lastInitialState !== initialState) {\n          newState = state;\n          if (!shouldNotify) {\n            lastInitialState = initialState;\n            shouldNotify = true;\n          }\n        }\n        initialState = null;\n      }\n\n      return stateChange;\n    };\n    lastStateUpdater = stateUpdater;\n\n    component.setState(stateUpdater, () => {\n      if (shouldNotify) {\n        notifyStateChange(newState, lastInitialState);\n        shouldNotify = false;\n      }\n    });\n  };\n  const applyFieldReducer = (field, reduce, payload) => {\n    applyReducer(state => ({\n      [field]: reduce(state[field], payload),\n    }));\n  };\n\n  return {\n    applyReducer,\n    applyFieldReducer,\n  };\n};\n","import * as React from 'react';\n\nconst makeBoundComponent = (Target, components, exposed: object) => {\n  class Component extends React.PureComponent {\n    static components: PluginComponents;\n\n    render() {\n      return <Target {...components} {...this.props} />;\n    }\n  }\n  Component.components = Target.components;\n  Object.assign(Component, exposed);\n  return Component;\n};\n\nexport type PluginComponents = { [key: string]: string };\nexport interface ITargetComponent {\n  components: PluginComponents;\n}\n// type ITargetComponentStatic = new() => ITargetComponent;\n\n/** @internal */\nexport const withComponents = components => (Target) => {\n  const props = {};\n  const exposed = {};\n  const targetComponents = (Target as ITargetComponent).components;\n\n  Object.entries(targetComponents).forEach(([fieldName, componentName]: [string, string]) => {\n    const component = components[componentName];\n    if (component && component !== Target[componentName]) {\n      props[fieldName] = component;\n    }\n    exposed[componentName] = component || Target[componentName];\n  });\n\n  return Object.keys(props).length > 0\n    ? makeBoundComponent(Target, props, exposed) : Target;\n};\n","/* globals Element */\nimport * as PropTypes from 'prop-types';\n\n/** @internal */\nexport const RefType = PropTypes.shape({\n  current: PropTypes.instanceOf((typeof Element !== 'undefined') ? Element : Object),\n});\n"]},"metadata":{},"sourceType":"module"}